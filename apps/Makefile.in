DEPTH   = ..
topsrcdir       = @top_srcdir@
srcdir          = @srcdir@
VPATH           = @srcdir@

VERSION = 1

CFLAGS = -g -Wall @DEFS@ \
    -DHOSTTYPE=\"@host@\" \
    -DVERSION=$(VERSION)

CC = @CC@ $(CFLAGS) -I @top_srcdir@/api

LIBS = ../api/api.o ../lib/parse.o

CLIBS = @LIBS@

APPS = upper_case concat uc_slow concat_slow 1sec

.C.o:
	$(CC) -c -o $*.o $<
.c.o:
	$(CC) -c -o $*.o $<

all: $(APPS)

upper_case: upper_case.o
	$(CC) upper_case.o $(LIBS) -o upper_case

concat: concat.o
	$(CC) concat.o $(LIBS) -o concat

concat_slow: concat_slow.o
	$(CC) concat_slow.o $(LIBS) -o concat_slow

uc_slow: uc_slow.o
	$(CC) uc_slow.o $(LIBS) -o uc_slow

1sec: 1sec.o
	$(CC) 1sec.o $(LIBS) -o 1sec

install: all
	-mkdir -p /usr/local/boinc/apps
	cp upper_case /usr/local/boinc/apps/upper_case
	cp concat /usr/local/boinc/apps/concat
	cp uc_slow /usr/local/boinc/apps/uc_slow
	cp concat_slow /usr/local/boinc/apps/concat_slow
	cp 1sec /usr/local/boinc/apps/1sec

clean:
	rm -f *.o $(APPS) dependencies

dependencies: @srcdir@/*.C
	$(CC) -M @srcdir@/*.C > dependencies

include dependencies

