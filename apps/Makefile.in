DEPTH   = ..
topsrcdir       = @top_srcdir@
srcdir          = @srcdir@
VPATH           = @srcdir@

INSTALL_DIR = /usr/local/boinc

VERSION = 1

CFLAGS = -g -Wall @DEFS@ \
    -DHOSTTYPE=\"@host@\" \
    -DVERSION=$(VERSION)

CC = @CC@ $(CFLAGS) -I @top_srcdir@/api

LIBS = ../api/api.o ../lib/parse.o

CLIBS = @LIBS@

APPS = upper_case concat uc_slow concat_slow 1sec uc_cpu

.C.o:
	$(CC) -c -o $*.o $<
.c.o:
	$(CC) -c -o $*.o $<

all: $(APPS)

upper_case: upper_case.o
	$(CC) upper_case.o $(LIBS) -o upper_case

concat: concat.o
	$(CC) concat.o $(LIBS) -o concat

concat_slow: concat_slow.o
	$(CC) concat_slow.o $(LIBS) -o concat_slow

uc_slow: uc_slow.o
	$(CC) uc_slow.o $(LIBS) -o uc_slow

uc_cpu: uc_cpu.o
	$(CC) uc_cpu.o $(LIBS) -o uc_cpu

1sec: 1sec.o
	$(CC) 1sec.o $(LIBS) -o 1sec

install: all
	-mkdir -p $(INSTALL_DIR)/apps
	cp upper_case $(INSTALL_DIR)/apps/upper_case
	cp concat $(INSTALL_DIR)/apps/concat
	cp uc_slow $(INSTALL_DIR)/apps/uc_slow
	cp concat_slow $(INSTALL_DIR)/apps/concat_slow
	cp 1sec $(INSTALL_DIR)/apps/1sec

uninstall: 
	$(RM) -r $(INSTALL_DIR)/apps

clean:
	rm -f *.o $(APPS) dependencies

dependencies: @srcdir@/*.C
	$(CC) -M @srcdir@/*.C > dependencies

include dependencies

