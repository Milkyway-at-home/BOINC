DEPTH   = ..
topsrcdir       = @top_srcdir@
srcdir          = @srcdir@
VPATH           = @srcdir@

INSTALL_DIR = /usr/local/boinc

VERSION = 1

CFLAGS = -g -Wall @DEFS@ \
    -DHOSTTYPE=\"@host@\" \
    -DVERSION=$(VERSION)

CC = @CC@ $(CFLAGS) -I @top_srcdir@/api -I@top_srcdir@/lib

LIBS = ../api/boinc_api.o ../api/graphics_api.o ../api/mfile.o ../lib/parse.o ../lib/filesys.o ../lib/util.o

CLIBS = @LIBS@

APPS = upper_case concat 1sec

.C.o:
	$(CC) -c -o $*.o $<
.c.o:
	$(CC) -c -o $*.o $<

all: $(APPS)

upper_case: upper_case.o
	$(CC) upper_case.o $(LIBS) -o upper_case

concat: concat.o
	$(CC) concat.o $(LIBS) -o concat

1sec: 1sec.o
	$(CC) 1sec.o $(LIBS) -o 1sec

install: all
	-mkdir -p $(INSTALL_DIR)/apps
	cp upper_case $(INSTALL_DIR)/apps/upper_case
	cp concat $(INSTALL_DIR)/apps/concat
	cp 1sec $(INSTALL_DIR)/apps/1sec

uninstall: 
	$(RM) -r $(INSTALL_DIR)/apps

clean:
	rm -f *.o $(APPS) dependencies

dependencies: @srcdir@/*.C
	$(CC) -M @srcdir@/*.C > dependencies

include dependencies

