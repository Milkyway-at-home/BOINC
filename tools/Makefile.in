DEPTH   = ..
topsrcdir       = @top_srcdir@
srcdir          = @srcdir@
VPATH           = @srcdir@

VERSION = 1

MYSQL_INC = /usr/local/mysql/include

CFLAGS = -g -Wall @DEFS@ \
    -DHOSTTYPE=\"@host@\" \
    -DVERSION=$(VERSION) \
    -I @top_srcdir@/lib -I @top_srcdir@/db -I $(MYSQL_INC)

CC = @CC@ $(CFLAGS)

CLIBS = @LIBS@

OBJS = \
    backend_lib.o \
    process_result_template.o

PROGS = create_work add country_select
all: $(PROGS) $(OBJS)

MYSQL_DIR = /usr/local/mysql/lib
MYSQL_LIBS = \
-L $(MYSQL_DIR) -L /usr/local/lib/mysql \
-lmysqlclient -lz \
-lm $(NETLIBS)

LIBS = \
    backend_lib.o \
    process_result_template.o \
    ../lib/md5_file.o \
    ../lib/md5.o \
    ../db/db_mysql.o \
    ../db/mysql_util.o

.C.o:
	$(CC) -c -o $*.o $<

create_work: create_work.o $(LIBS)
	$(CC) create_work.o $(CLIBS) $(LIBS) $(MYSQL_LIBS) -o create_work

add: add.o $(LIBS)
	$(CC) add.o $(LIBS) $(CLIBS) $(MYSQL_LIBS) -o add

country_select: country_select.o ../lib/countries.o
	$(CC) country_select.o ../lib/countries.o -o country_select

clean:
	rm -f *.o create_work add core country_select dependencies

dependencies: @srcdir@/*.C
	$(CC) -M @srcdir@/*.C > dependencies

include dependencies

