DEPTH   = ..
topsrcdir       = @top_srcdir@
srcdir          = @srcdir@
VPATH           = @srcdir@

INSTALL_DIR = /usr/local/boinc

VERSION = 1

CFLAGS = -g -Wall @DEFS@ \
    -I@top_srcdir@/lib/ \
    -I@top_srcdir@/client/

CC = @CC@ $(CFLAGS)

CLIBS = @LIBS@

PROGS = api_app api_test

#all: $(PROGS)
all: mfile.o boinc_api.o graphics_api.o

APP_OBJS = \
    api_app.o \
    mfile.o \
    boinc_api.o \
    ../lib/parse.o

TEST_OBJS = \
    boinc_api.o \
    api_test.o \
    ../lib/parse.o

.C.o:
	$(CC) -c -o $*.o $<
.c.o:
	$(CC) -c -o $*.o $<

api_app: $(APP_OBJS)
	$(CC) $(APP_OBJS) $(CLIBS) -o api_app

api_test: $(TEST_OBJS)
	$(CC) $(TEST_OBJS) $(CLIBS) -o api_test

install: all
	-mkdir -p $(INSTALL_DIR)/api
	cp api_test $(INSTALL_DIR)/api/api_test
	cp api_app $(INSTALL_DIR)/api/api_app

uninstall: 
	$(RM) -r $(INSTALL_DIR)/api;

clean:
	rm -f *.o $(PROGS) core dependencies

dependencies: @srcdir@/*.C
	$(CC) -M @srcdir@/*.C > dependencies

include dependencies
