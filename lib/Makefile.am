## -*- mode: make; tab-width: 4 -*-
## $Id$

include $(top_srcdir)/Makefile.incl

#if HAVE_NSL
nslprogs=gui_test
#endif

bin_PROGRAMS = crypt_prog $(nslprogs)

EXTRA_PROGRAMS = md5_test shmem_test msg_test

##LIBS = -lnsl -lsocket
gui_test_SOURCES = gui_test.C gui_rpc_client.C gui_rpc_client.h
gui_test_LDADD = $(lib_LIBRARIES) $(PTHREAD_LIBS)

lib_LIBRARIES = libboinc.a 

EXTRA_DIST = *.h *.C

libboinc_a_SOURCES =        \
    app_ipc.C               \
	base64.C                \
    crypt.C                 \
    diagnostics.C           \
    exception.C             \
    filesys.C               \
    hostinfo.C              \
    language.C              \
    md5.c                   \
    md5_file.C              \
    mem_usage.C             \
    mfile.C                 \
    miofile.C               \
    msg_log.C               \
    parse.C                 \
    prefs.C                 \
    proxy_info.C            \
	shmem.C                 \
    util.C					\
	base64.h  				\
	crypt.h  				\
	error_numbers.h  		\
	exception.h  			\
	gui_rpc_client.h  		\
	language.h  			\
	md5_file.h  			\
	md5.h  					\
	msg_log.h  				\
	msg_queue.h  			\
	parse.h  				\
	result_state.h  		\
	shmem.h  				\
	stackwalker_win.h  		\
	std_fixes.h  			\
	synch.h  

include_HEADERS =               \
                app_ipc.h       \
                diagnostics.h   \
                filesys.h       \
                boinc_win.h     \
                mfile.h         \
                util.h          \
                hostinfo.h      \
                proxy_info.h    \
                prefs.h         \
                exception.h     \
                miofile.h 

## install header-files with prefix-subdir BOINC/ to avoid name-conflicts
includedir = ${prefix}/include/BOINC/

md5_test_SOURCES = md5_test.C md5.c md5_file.C
shmem_test_SOURCES = shmem_test.C shmem.C
msg_test_SOURCES = msg_test.C msg_queue.C
crypt_prog_SOURCES = crypt_prog.C crypt.C md5.c md5_file.C
crypt_prog_DEPENDENCIES = $(LIBRSA)
crypt_prog_LDADD = $(RSA_LIBS) $(PTHREAD_LIBS)
