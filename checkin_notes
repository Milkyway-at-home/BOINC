David  Jan 1 2008
    - fixed bug in upgrade

    checkin_notes_2007 (new)
    tools/
        upgrade

David  Jan 1 2008
    - web: My Account page, other user account page, and profile pages
        now have community info in a 2nd column on the right.
        This accomplishes two things:
        1) it puts community info in more places;
        2) it provides a reasonable way to format long lists of friends;
            they just continue down the right column.

    html/
        inc/
            profile.inc
            user.inc
            util.inc
        ops/
            profile_screen_form.php
        user/
            home.php
            profile_rate.php
            show_user.php
            view_profile.php

Charlie Jan 2 2008
    - Mac Client: revert to using older API NXIdleTime() to get user 
        idle time because the newer APIs CGSSecondsSinceLastInputEvent() 
        and CGEventSourceSecondsSinceLastEventType() don't work properly 
        when running as a daemon.
    - Mac: Update script which sets BOINC up to run as a daemon so it 
        works properly under OS 10.5.
        
    client/
        hostinfo_unix.C
        main.C
    lib/
        hostinfo.h
    mac_build/
        Make_BOINC_Service.sh
        
David  Jan 1 2008
    - web: add "Find friends" link to private friends list
    - web: in user search form, give input focus to name field

    html/
        inc/
            user.inc
        user/
            user_search.php

David  Jan 3 2008
    - make_project: prepend "./" to config.xml script names in case "." is not
        in Apache's search path
    - web: show UOTD text correctly
    - web: memoize profile_screening() in attempt to fix out-of-memory error
        when building profile pages on S@h
    - web: move gallery.inc into update_profile_pages and remove it

    html/
        inc/
            gallery.inc (removed)
            profile.inc
            uotd.inc
        ops/
            update_profile_pages.php
    tools/
        make_project

David  Jan 3 2008
    - web: fix broken link for profile like/don't like.
        TODO: currently these don't do anything useful.  Fix this.

    html/inc/
        profile.inc

David  Jan 3 2008
    - API: on Mac, call getrusage() from timer thread
        (since calling it from worker thread causes crashes).
        On Linux, call getrusage() from the worker thread
        (since calling it from the timer thread returns zero on some systems).
    - stripcharts: make it work even if Perl is not in path (from Eric Myers)

    api/
        boinc_api.C
    stripchart/
        stripchart

David  Jan 4 2008
    - web: add RSS feed for notifications
    - make_project: disable community-related periodic tasks
        for newly-created projects

    html/
        inc/
            forum.inc
            friend.inc
            notify.inc (new)
            pm.inc
            user.inc
        user/
            img/
                rss_icon.gif
            sample_index.php
    tools/
        make_project

Charlie Jan 6 2008
    - Mac Client: more idle time tweaks to allow running as a daemon by 
        using Mac OS X's launchd mechanism.  
    - Mac Installer: if system is set up to run BOINC Client as a daemon 
        using launchd, use launchctl to launch newly installed Client as 
        a daemon.

    client/
        hostinfo_unix.C
        main.C
    mac_installer/
        PostInstall.cpp

David  Jan 6 2008
    - web: bug fixes

    html/
        inc/
            util.inc
        ops/
            update_profile_pages.php

David  Jan 6 2008
    - scheduler: change <max_wus_in_progress> to be per CPU, not per host

    sched/
        sched.send.C
        sched_config.h

David  Jan 7 2008
    - Added Isle of Man to country list

    html/inc/
        countries.inc

David  Jan 7 2008
    - XML fix in backend lib

    tools/
        backend_lib.C

Rom    Jan 7 2008
    - Empty strings cause CreateProcess to fail on parameter checks.
    
    clientgui/
        BOINCGUIApp.cpp

David  Jan 7 2008
    - API: fix to changeset 14462: I put the getrusage() in the wrong place
    api/
        boinc_api.C

David  Jan 7 2008
    - small web fixes; fixes #421
    html/
        ops/
            show_log.php
            manage_user.php
        inc/
            util_ops.inc

David  Jan 7 2008
    - web: if user A is ignoring user B,
        don't accept a friend request from B to A
    - boinc_cmd: --help fix

    html/user
        friend.php
    lib/
        boinc_cmd.C

Charlie Jan 7 2008
    - Mac MGR: if using Mac OS X's launchd mechanism to run Client as a daemon,
        allow time for daemon to launch.  
    - Mac: Update script which sets BOINC up to run as a daemon so it 
        uses Mac OS X's launchd mechanism.  This requires BOINC version 
        5.10.34 or later and Mac OS 10.4 or later.

    clientgui/
        BOINCGUIApp.cpp,h
    mac_build/
        Make_BOINC_Service.sh

David  Jan 7 2008
    - web: add "Mark all threads as read" button to Help Desk (fixes #531)
    - add "self" link to RSS notify feed
    - web: if fail to send email, don't show error message
        (might reveal recipient's email addr)

    html/
        inc/
            email.inc
            forum.inc
        user/
            forum_help_desk.php
            forum_index.php
            notify_rss.php

David  Jan 8 2008
    - API: call update_app_progress() only from the timer thread.
        Previously it was called from both timer and worker thread,
        with no synchronization.  Bad.
        boinc_finish(): sleep for 2 seconds, enough to ensure that
        the timer thread sends the final messages.
    - API: a compile flag GETRUSAGE_IN_TIMER_THREAD selects
        how to get CPU time; by default set only for Mac OS X
    - scheduler: cap #CPUs scaling for <max_wus_per_host> at 8

    api/
        boinc_api.C
    sched/
        sched_send.C

David  Jan 8 2008
    - client, Win: check for two process exit codes (0x40010004 and 0xc000013a)
        that appear to happen when the process is killed externally;
        seems to happen mostly or entirely on Vista
        
    client/
        app_control.C

Charlie Jan 8 2008
    - Mac: additional error checking in build script; fix url in error message.
    
    mac_build/
        BuildMacBOINC.sh

David  Jan 9 2008
    - API, Unix: fix bug where boinc_sleep() hangs forever.
        This was because SIGALRM always interrupts sleep()
        and keeps boinc_sleep() stuck in its while loop.
        Solution: change boinc_sleep() so that it works even if
        rapid signals (e.g. interval timer) are happening
    - API: remove deprecated graphics files from Makefile.
        Old-style graphics are no longer supported.
    - web: add empty show_user_donations_private() to donations.inc

    api/
        Makefile.am
        boinc_api.C,h
    html/
        project.sample/
            donations.inc
        user/
            home.php

David  Jan 9 2008
    - Fix the credit_study.php script to 1) be correct and
        2) explain its output

    html/ops/
        credit_study.php

David  Jan 9 2008
    - client: patches to make it work on FreeBSD
    - client: fix bug where attaching to a project with existing
        app_info.xml would fail to parse the app_info.xml
    (both from Pav Lucistnik)

    client/
        cs_account.C
        hostinfo_unix.C

Charlie Jan 10 2008
    - MGR: display MSG_USER_ERROR messages in red, all others in black 
        in both SimpleGUI and Advanced GUI message dialogs; eliminate 
        unused FormatPriority method.  
    - MGR: Auto-scroll messages only if already at bottom of list (don't 
        jump to bottom while examining earlier messages.)
    NOTE: these changes may need to be applied in CViewMessagesGrid class 
            if we implement that in the future.
        
    clientgui/
        sg_DlgMessages.cpp,h
        ViewMessages.cpp

David Jan 10 2008
    - client: don't count header in bytes_xferred for file uploads
        (this causes confusing output in the Manager,
        bytes xferred greater than file size)
    - API and client: make boinc_sleep() work regardless of signals
    - some code cleanup in http_curl.C

    client/
        http_curl.C,h
    html/inc/
        stats_sites.inc
    lib/
        util.C

Charlie Jan 10 2008
    - Mac API: Delete old target gfxlibboinc and obsolete source files 
        from XCode project.
    - Mac: Update build script to build libboinc_graphics2.a instead of 
        libboinc_graphics_api.a.  Fixes #536.

    mac_build/
        boinc.xcodeproj/
            project.pbxproj
        BuildMacBOINC.sh

David  Jan 10 2008
    - Fix long-standing bug in CPU throttling

    client/
        cs_prefs.C

Rom    Jan 11 2008
    - MGR: Inform the user that they'll need to be added to the boinc_users
        group if access to gui_rpc_auth.cfg is denied.
    - Fix a crash condition when BOINC is started as a standard user account
        without the 'create global named objects' user right on Vista.
    - WINSETUP: Make sure that BOINC Tray is started for all users on the
        system.
    - WINSETUP: If the 'All users can control BOINC' checkbox is checked then
        put the BOINC Manager startup short cut in the 'all users' startup directory
        otherwise put it in the 'users' startup directory.

    clientgui/
        BOINCBaseFrame.cpp, .h
        MainDocument.cpp, .h
    clientlib/win/
        IdleTracker.cpp
    win_build/installerv2/
        BOINC.ism
    win_build/installerv2/redist/Windows/src/boinccas/
        boinccas.rc
    win_build/installerv2/redist/Windows/Win32/
        boinccas.dll
        boinccas95.dll
    win_build/installerv2/redist/Windows/x64/
        boinccas.dll
        boinccas95.dll

Rom    Jan 11 2008 (HEAD)
    - Tag for 6.1.6 release, all platforms
      boinc_core_release_6_1_6

David  Jan 11 2008
    - web: fix bug there message link not correct in search results
        fixes #539

    html/user/
        forum_search_action.php

David  Jan 11 2008
    - client, Win: check for network connectivity (for time stats log file)
    - client: add platform/version lines to time stats log file

    client/
        http_curl.C
        sim_util.C
        time_stats.C
    lib/
        network.C,h
    win_build/
        boinc_cli_curl.vcproj

David  Jan 11 2008
    - web: in host merge pages, provide "Show details" button,
        which shows the reasons why pairs of hosts
        were not eligible for merging

    html/
        inc/
            host.inc
        user/
            host_edit_form.php

Charlie Jan 11 2008
    - Mac: Fix compile error on some Macs by changing XCode Project reference 
        "texfont.c" to "texfont.C".
    - MGR: New message about needing to be added to the boinc_users group 
        applies only to Windows.
        
    mac_build/
        boinc.xcodeproj/
            project.pbxproj
    clientgui/
        BOINCBaseFrame.cpp

David  Jan 12 2008
    - Client: add <run_apps_manually> config flag.
        This is for debugging apps (currently works only in Unix).
        What it does: when running an app,
        the client does everything except actually fork/exec the app,
        i.e. it sets up the slot dir, creates shared mem segment etc.
        It then continues as if the app were actually running,
        and you can then manually run your app under a debugger
        in the slot directory.
        Note: the client won't notice the termination of your app.
    - API, Unix: in situations where the timer thread wants to exit
        (e.g. it notices a missing heartbeat).
        don't directly call boinc_exit(),
        since this touches data structures that the worker thread
        may be using concurrently.
        Instead, set a flag telling the worker thread to call boinc_exit()
        (which it will do from its signal handler)
        This is an attempt to fix problems reported by Bernd;
        I haven't tested it.
    - scheduler: add config flag for uploading usage data
    - web: show account key and weak account key on user page
    - added some code for multithread support (not finished)

    api/
        boinc_api.C,h
    client/
        app.h
        app_control.C
        app_start.C
        cpu_sched.C
        log_flags.C,h
    html/
        inc/
            user.inc
        user/
            white.css
    lib/
        app_ipc.C,h
    sched/
        Makefile.am
        handle_request.C
        sched_config.C,h
        server_types.C,h

David  Jan 12 2008
    - client: implement <start_apps_manually> for Windows too
    - client: check /dev/input/mice/ for idle detection;
        apparently that's replaced /dev/mouse in Linux
        (from Toby Murray)
    - API: make old-style graphics compile again

    api/
        boinc_api.C,h
        graphics_api.C
        graphics_impl.C
        graphics_lib.C
    client/
        app_start.C
        hostinfo_unix.C

David  Jan 14 2008
    - server/web: the weak auth scheme had a major flaw:
        It didn't work on a host's first scheduler RPC
        (when it passes an auth but no host ID).
        How do we look up user in this case?
        The weak auth is not stored explicitly in the DB.
        Solution: include the user ID in the weak auth.
        (this invalidates existing weak auths)

    html/
        inc/
            user.inc
        user/
            weak_auth.php
    sched/
        handle_request.C

David  Jan 14 2008
    - scheduler: forgot to add a couple of files

    sched/
        time_stats_log.C,h

David  Jan 14 2008
    - renamed clean_out_dir() to client_clean_out_dir(),
        and put the original clean_out_dir() back in lib/filesys.C

    client/
        app.C
        app_control.C
        file_names.C
        sandbox.C,h
    lib/
        filesys.C,h

David  Jan 14 2008
    - updated INSTALL

    INSTALL

Rom    Jan 14 2008
    - Add a "Forgot your password" hyperlink to the wizards
        account info page.
        
    clientgui/
        AccountInfoPage.cpp, .h
        BOINCWizards.h

David  Jan 14 2008
    - scheduler: fix weak auth bug

    sched/
        handle_request.C

Charlie Jan 14 2008
    Fix Compiler warning.

    api/
        boinc_api.C

David  Jan 15 2008
    - client: a project (Ralph) had accidentally included a .svn directory in a zip archive,
        resulting in a lot of read-only files in its slot directories.
        When the client attempts to delete these files,
        each delete fails and the client retries for about 5 seconds.
        This adds up to a delay of about 20 minutes,
        during which the client (and Manager) appear to be hung.

        Solution:
        1) if a file delete fails with error ERROR_ACCESS_DENIED,
            use SetFileAttributes() to clear the read-only flag, then try again.
        2) Don't use the 5-second retry mechanism when clearing out
            slot directories.  These can contain unbounded numbers of files,
            and this can lead to long periods where the client appears hung.

    client/
        app.C
        client_types.C
        cs_trickle.C
        file_names.C
        sandbox.C,h

Rom     Jan 15 2008
    - WINSETUP: Add some additional comments to the setup log when
        we know we cannot do a migration and why.
    
    win_build/installerv2/redist/Windows/src/boinccas/
        boinccas.rc
        CAMigrateBOINCData.cpp
    win_build/installerv2/redist/Windows/Win32/
        boinccas.dll
        boinccas95.dll
    win_build/installerv2/redist/Windows/x64/
        boinccas.dll
        boinccas95.dll

David  Jan 15 2008
    - Manager: "Forgot your password" needs a question mark
    - Win diagnostics: diagnostics_dump_thread_information() had a printf
         with bad format string, caused a crash, not what diagnostics should do

    clientgui/
        AccountInfoPage.cpp
    lib/
        diagnostics_win.cpp

David  Jan 15 2008
    - web: fixed screwed-up UOTD logic.
        The meaning of the <screen_profiles> config flag is:
        If set:
            profiles must be screened by admins before their photo is shown.
            When this is done, profile.verification is set to 1
            (and they become eligible to be UOTD)
        If not set:
            profile photos are always shown.
            Profiles must be screened by admins before
            they are eligible for UOTD.
            When this is done, profile.verification is set to 1
        So default_uotd_candidates_query() is the same in either case.
    - web: fix profile_screen_form.php
        (admin page for screening profiles)
    - web: make a copy of login_action.php in ops/

    html/
        inc/
            uotd.inc
        ops/
            login_action.php (new)
            profile_screen_form.php

David  Jan 15 2008
    - client: restore proper sense of --check_all_logins
        (should this be set by default?)
    - web: removed addslashes() when building language translation arrays.
        These caused 's to be displayed as \' everywhere.
        They may serve some purpose, but I can't think of what it is.
    - web: changed max profile image dimensions from 800x600 to 640x480.
        The new profile page puts a column to the right
        of the image, so it shouldn't be quite that wide.
    client/
        hostinfo_unix.C
    html/
        inc/
            profile.inc
            translation.inc
            stats_sites.inc
        user/
            create_profile.php
    lib/
        filesys.C

David  Jan 15 2008
    - API: fix to zip code (from Carl C)

    zip/zip/
        z_fileio.c

Charlie Jan 15 2008
    MGR: When connection to Client is lost, don't clear message window; show 
        messages grayed out instead.
    NOTE: these changes may need to be applied in CViewMessagesGrid class 
        if we implement that in the future.
        
    clientgui/
        MainDocument.cpp
    clientgui/
        sg_DlgMessages.cpp
        ViewMessages.cpp

Charlie Jan 16 2008
    Mac Sandbox: make BOINC Data directory and files not world-readable to 
        hide account keys from unauthorized users.
        
    client/
        check_security.C
        client_types.C
        file_names.C
        main.C
    clientgui/
        mac/
            SetupSecurity.cpp
    doc/
        sandbox.php

Rom    Jan 16 2008
    - MGR: If the project_init.xml file suggests a project to attach too
        attempt to attach to it.
    - CLIENT: Move the code that deletes the project_init.xml from detach
        project to attach project.  It is only needed for as long as
        it takes to attach to a project.
        
    client/
        gui_rpc_server_ops.C
    clientgui/
        AdvancedFrame.cpp
        sg_BoincSimpleGUI.cpp

Charlie Jan 17 2008
    Mac Sandbox: make user boinc_master part of group boinc_project.
        
    client/
        check_security.C
    clientgui/
        mac/
            SetupSecurity.cpp
    doc/
        sandbox.php

Rom    Jan 17 2008 (HEAD)
    - Tag for 6.1.7 release, all platforms
      boinc_core_release_6_1_7

David  Jan 17 2008
    - API: make the libraries for old-style graphics compile again
        (these are no longer supported, but they probably still work)
    api/
        boinc_api.C,h
        graphics_impl.h
    client/
        acct_mgr.C

Charlie Jan 17 2008
    API: fix compiler warning.
    Mac Sandbox: group membership apparently only affects real UID not 
        effective UID, so it made no difference; remove code which makes 
        user boinc_master part of group boinc_project.
    Mac Sandbox: make BOINC Data directory and files not world-readable to 
        hide account keys from unauthorized users; but make files in slots 
        and project directories world-readable so Client can read files 
        written by project applications with user and group boinc_project. 
    
    api/
        texfont.C
    client/
        app_start.C
        check_security.C
    clientgui/
        mac/
            SetupSecurity.cpp
    doc/
        sandbox.php
    mac_build/
        Mac_SA_Secure.sh

David  Jan 18 2008
    - scheduler: if get request w/o host ID,
        use most recently created host with same domain name,
        IP addr, OS name, and CPU model, if one exists.
        (from Kevin Reed)

    sched/
        handle_request.C

Rom    Jan 18 2008
    - WINSETUP: Fix failed termination attempts on Win64
    
    win_build/installerv2/
        BOINC.ism
    win_build/installerv2/redist/Windows/src/boinccas/
        boinccas.rc
        terminate.h
    win_build/installerv2/redist/Windows/Win32/
        boinccas.dll
        boinccas95.dll
    win_build/installerv2/redist/Windows/x64/
        boinccas.dll
        boinccas95.dll

Charlie Jan 18 2008
    GFX API: change args passed to GlutInit() to be original unmodified args 
        which were passed to the application, as specified in the man page.

    api/
        graphics2_unix.C

David  Jan 19 2008
    - web: fixed extremely minor bug in forum search; fixes #539

    html/user/
        forum_search_action.php

David  Jan 21 2008
    - create_work: added -opaque option (to specify workunit.opaque)

    client/
        log_flags.C
    tools/
        create_work.C

Rom    Jan 21 2008
    - MGR: Shrink the amount of space between the different projects
        in the project list.
        
    clientgui/
        ProjectListCtrl.cpp

Rom    Jan 21 2008
    - MGR: Make sure the attach to project wizard launches if BOINC
        is not attached to any projects.
        
    clientgui/
        AdvancedFrame.cpp
        sg_BoincSimpleGUI.cpp

Rytis   Jan 22 2008
    - User web: fix donations page with multiple donation targets.
    
    html/user/
        donation_ipn.php

David  Jan 23 2008
    - upgrade script: rename cgi and file_upload_handler
        before trying to copy new ones,
        in case there's an instance currently running

    py/Boinc/
        setup_project.py

Charlie Jan 23 2008
    GFX API: Fix to makefile for Macintosh (from Bernd Machenschalk).
    
    api/
        makefile.am

Rom    Jan 24 2008
    - LIB: Make sure that the worker and graphics processes are created
        using the idle process priority class.

    lib/
        util.C

David  Jan 24 2008
    - scheduler: get FCGI version to compile

    lib/
        miofile.C
        util.C
    sched/
        Makefile.am

David  Jan 24 2008
    - Manager: make email input field bigger

    clientgui/
        AccountInfoPage.cpp

David  Jan 28 2008
    - API: allow Win apps to have icon

    api/
        Makefile.am
        graphics2.h
        graphics2_win.C

David  Jan 28 2008
    - web: fix bug in handling of links on "forget password?" emails
    - web: show number of friends

    html/
        inc/
            user.inc
        user/
            login_action.php

David  Jan 28 2008
    - client: add <force_ntlm> config flag.
        Causes client to use NTLM auth and HTTP 1.0
    - client: we weren't doing exponential backoff if scheduler
        requests failed at initialization; fix this

    client/
        http_curl.C
        log_flags.C,h
        scheduler_op.C

David  Jan 28 2008
    - API: fix Win build error
    - API: fix Makefile.am
    - add LGPL license on some files

    api/
        Makefile.am
        graphics_api.C
        graphics2_win.C
        graphics2_unix.C
        graphics2_util.C
        graphics2.C


Charlie Jan 29 2008
    - Mac: Update libCurl to 7.18.0, build with c-ares-1.5.1 to enable 
        async DNS name resolving.
    - Mac API: move mac_icon.C from target api_libboinc to gfx2libboinc
        (link it into libboinc_graphics2.a instead of libboinc_api.a).
        
    mac_build/
        buildc-ares.sh (new)
        buildcurl.sh
        HowToBuildBOINC_XCode.rtf
        setupForBOINC.sh
        boinc.xcodeproj/
            project.pbxproj

Charlie Jan 29 2008
    - MGR: Delete web site buttons when disconnected; this was causing 
        crashes when a user connected to a different computer.
        
    clientgui/
        BOINCBaseView.cpp
        MainDocument.cpp
        ViewProjects.cpp
        ViewProjectsGrid.cpp
        ViewWork.cpp
        ViewWorkGrid.cpp

David  Jan 29 2008
    - graphics API: default max graphics CPU fraction is 0.2
        (see accompanying changes in example app;
        app should parse project-specific prefs)

    api/
        graphics2.C

David  Jan 29 2008
    - web: add "max CPU % for graphics" project-specific preference.
        Projects should copy or merge
        project.sample/project_specific_prefs.inc
    - screensaver: change
            Running research for PROJECT
            Workunit: X
        to
            Computing for PROJECT
            Task: X

    clientscr/
        screensaver_win.cpp
    html/
        project.sample/
            project_specific_prefs.inc
        inc/
            prefs.inc

David  Jan 29 2008
    - web: add "% of CPUs to use on multiprocessors" pref
    - client: enforce the above pref; remove the max_cpus pref.

    client/
        cpu_sched.C
    html/inc/
        prefs.inc
    lib/
        prefs.C,h

David  Jan 29 2008
    - manager: change advanced preferences to handle the above pref

    clientgui/
        DlgAdvPreferences.cpp
        DlgAdvPreferencesBase.cpp

Charlie Jan 29 2008
    - SCR: When running V5 GFX applications as a service / daemon, display 
        appropriate error message instead of trying to display graphics.
    - API: Add executing_as_daemon bool to get_state rpc.
    - MGR: Disable Show Graphics button for V5 GFX applications when BOINC 
        is running as a service / daemon.

    client/
        cs_statefile.C
    clientgui/
        MainDocument.h
        ViewWork.cpp
        ViewWorkGrid.cpp
    clientscr/
        boinc_ss.rc
        mac_saver_module.cpp
        Mac_Saver_Module.h
        screensaver.cpp
        screensaver_win.h
    lib/
        gui_rpc_client.h
        gui_rpc_client_ops.C

Rom    Jan 30 2008
    - MGR: Change the CC startup logic so that more informative error
        messages.
        
      Policy Change: When installed as a service or daemon, the service
        or daemon manager should start BOINC, not the BOINC Manager.
        (Windows Only for right now, should eventually be applied
         to all platforms)
    - LIB: Revert my previous change that launched graphics apps as
        an idle process.
    - LIB: Take care of some warnings.
        
    clientgui/
        BOINCBaseFrame.cpp, .h
        BOINCClientManager.cpp, .h (Added)
        BOINCGUIApp.cpp, .h
        MainDocument.cpp, .h
    lib/
        util.C

Charlie Jan 30 2008
    - MGR: Fix a few bugs in the new CC startup logic; if configured to 
        run client as a daemon on the Mac, then start / restart it as a 
        daemon when necessary.  Add new source files to XCode project.

    clientgui/
        BOINCClientManager.cpp,.h
        BOINCGUIApp.cpp
    mac_build/
        boinc.xcodeproj/
            project.pbxproj

Rom    Jan 30 2008 (HEAD)
    - Tag for 6.1.8 release, all platforms
      boinc_core_release_6_1_8

Rom    Jan 31 2008
    - WINSETUP: Fix the migration check where sometimes the data directory
        was being detected as within the install directory even though it
        was not.
        
    win_build/installerv2/redist/Windows/src/boinccas/
        boinccas.rc
        CAMigrateBOINCData.cpp
    win_build/installerv2/redist/Windows/Win32/
        boinccas.dll
        boinccas95.dll
    win_build/installerv2/redist/Windows/x64/
        boinccas.dll
        boinccas95.dll

Eric K  Jan 31 2008
    - Fixed missing symbols in MINGW32 application builds.
    - Fixed some type warnings.

    lib/
        boinc_win.h
        diagnostics_win.h
        md5_file.C
        miofile.C
        procinfo_win.C
        stackwalker_win.cpp

Rom    Jan 31 2008
    - WINSETUP: Don't configure MSI so that it'll attempt to stop the
        BOINC service, we already do it much earlier in the install
        process
    - WINSETUP: Fix two typos in the CACreateBOINCGroups custom
        action.
    - WINSETUP: Include CACreateClientAuthFile in the build now.

    win_build/installerv2/
        BOINC.ism
    win_build/installerv2/redist/Windows/src/boinccas/
        boinccas.def
        boinccas.vcproj
    win_build/installerv2/redist/Windows/src/boinccas/
        CACreateBOINCAccounts.cpp
        CACreateBOINCGroups.cpp
        CACreateClientAuthFile.cpp, .h (Added)
        CAMigrateBOINCData.cpp
        stdafx.h
    win_build/installerv2/redist/Windows/Win32/
        boinccas.dll
        boinccas95.dll
    win_build/installerv2/redist/Windows/x64/
        boinccas.dll
        boinccas95.dll
David  Jan 31 2008
    - manager: fix unix build (new file)

    clientgui/
        Makefile.am

Rom    Feb 1 2008
    - WINSETUP: disable creation of client_auth.xml on Win2k.
        Win2k requires any user account that is going to attempt
        to logon as another account to have admin privs.
    - WINSETUP: Give 'boinc_project' the right to be able to
        logon as a service, we denied the right to logon
        interactively.
    - WINSETUP: Disable the 'failed to shutdown BOINC service'
        dialog box.
    - CC: Use the client_auth.xml file if present to launch
        boinc applications as boinc_project if it exists.
    - LIB: Use the client_auth.xml file if present to launch
        boinc graphics applications as boinc_project if it
        exists.
        
    client/
        app_start.C
    lib/
        diagnostics_win.C
    lib/
        util.C, .h
    win_build/installerv2/redist/Windows/src/boinccas/
        boinccas.rc
        CACreateBOINCGroups.cpp
        CACreateClientAuthFile.cpp
        CAGrantBOINCMasterRights.cpp
        CAGrantBOINCProjectRights.cpp
        CAShutdownBOINC.cpp
    win_build/installerv2/redist/Windows/Win32/
        boinccas.dll
        boinccas95.dll
    win_build/installerv2/redist/Windows/x64/
        boinccas.dll
        boinccas95.dll
    win_build/
        boinc_ss.vcproj
        boincmgr_curl.vcproj
        libboinc.vcproj

David  Feb 2 2008
    - add weak auth to am_get_info web RPC (from Nicolas)

    html/user/
        am_get_info.php

David  Feb 2 2008
    - DB code: safe_atof() was returning a float,
        causing a potential loss of precision.
        Change it to double (same as atof())
    - When moderator locks a thread, let them specify reason

    db/
        db_base.h
    html/user/
        forum_moderate_thread.php
        forum_moderate_thread_action.php
        forum_thread.php

David  Feb 3 2008
    - client: limit global prefs mod time to now
    - server: limit global prefs mod time to now
        These changes address the situation where a server
        sends out prefs with mod time far in the future,
        and there's no way to undo them

    client/
        app_start.C
    lib/
        prefs.C,h
    sched/
        handle_request.C
        server_types.C,h
        show_shmem.C

Rom    Feb 3 2008
    - client: remove the auth_type and auth_flag code.
    - client: remove forbid reuse flag.
        
    client/
        http_curl.C, .h

Rom    Feb 3 2008
    - WIN: Update libcurl to 7.18.0
    
    curl/
        <Various Files>

Charlie Feb 5 2008
    - MGR: Set disconnected state when appropriate even when minimized (if 
        GetCoreClientStatus() call from CTaskBarIcon timer routine fails.)
    - MGR: Auto-restart Client only if last connection was to local host.
    - MGR: Test if Client is running after auto-restart, if so reconnect 
        automatically and skip dialog asking user.
    - Mac MGR: Don't skip notifications on Mac when mimimized; show them 
        when user opens Manager window.  Remove incorrect alert text on Mac 
        (telling user to start Manager in same directory as Client.)
    
    clientgui/
        BOINCBaseFrame.cpp
        MainDocument.cpp

David  Feb 5 2008
    - scheduler: send log messages to file, rather than httpd error log,
        when using FCGI (from Carl Christensen)

    lib/
        msg_log.C,h
    sched/
        Makefile.am
        file_upload_handler.C
        handle_request.C
        main.C
        sched_util.C,h
    tools/
        Makefile.am

David  Feb 5 2008
    - scheduler: simplified Carl's checkin (avoid virtual destructors)
    - API: small tweak for standalone

    api/
        graphics2_util.C
    lib/
        msg_log.C,h
    sched/
        Makefile.am
        edf_sim.C
        handle_request.C
        sched_msgs.C,h
        sched_util.C,h
    tools/
        Makefile.am

David  Feb 5 2008
    - trickle handler: make it compile, and add to Makefile.am
        (from Eric Myers)

    sched/
        Makefile.am
        trickle_handler.C

David  Feb 5 2008
    - Manager/client: add the ability to specify a port
        in the manager's "select host" dialog.
        Lets you connect over an SSH tunnel.
        From Der Meister.

    clientgui/
        AdvancedFrame.cpp
        MainDocument.cpp,h
    lib/
        gui_rpc_client.C,h

David  Feb 5 2008
    - GUI RPC: fix some XML errors (missing / in single-tag elements)
        Fixes #524 (from Nicolas)

    client/
        gui_rpc_server_ops.C
    lib/
        gui_rpc_client_ops.C

David  Feb 5 2008
    - GUI RPC: initialize disk usage structure
        to avoid wacky pie charts at startup
        Fixes #549 (from Der Meister)

    lib/
        gui_rpc_client.h

David  Feb 5 2008
    - delete_file: fix bugs and info text
        Fixes #551 (from Nicolas)

    sched/
        delete_file.C

David  Feb 5 2008
    - win compile fixes

    client/
        sim_util.C
    clientgui/
        BOINCBaseFrame.cpp
        MainDocument.cpp

Rom    Feb 5 2008
    - MGR: Cache the local computer name in statics to avoid functions
        that take awhile to execute.
        
    clientgui/
        MainDocument.cpp

David  Feb 5 2008
    - client: fix compile warning

    lib/
        msg_log.h

Charlie Feb 5 2008
    - MGR: fix compile warning

    clientgui/
        DlgAdvPreferences.cpp

Rom    Feb 6 2008
    - MGR: Fix a refresh bug when opening BOINC Manager from the taskbar.
    
    clientgui/
        BOINCTaskBar.cpp

David  Feb 6 2008
    - file upload handler: the FCGI version wasn't handling signatures,
        because the code to read keys in FCGI was commented out
        (and was in fact wrong).
        I fixed it and uncommented it.
    - make_project and upgrade: copy lib/crypt_prog to project/bin/

    lib/
        crypt.C
        crypt_prog.C
    py/Boinc/
        setup_project.py
    tools/
        sign_executable.C

David  Feb 6 2008
    - API: critical section begin/end calls can be nested
        Fixes #508 (from Nicolas)

    api/
        boinc_api.C

Rom    Feb 7 2008
    - client: expand the <force_ntlm> functionality so that we can
        force any authentication type. The new tag is called
        <force_auth> whihc can contain basic, digest, ntlm, and
        gss-negotiate.
        
    client/
        http_curl.C
        log_flags.C, .h

Charlie Feb 7 2008
    - MGR: If user shuts down connected client, don't auto-relaunch it.
    
    clientgui/
        MainDocument.cpp,h
        AdvancedFrame.cpp

David  Feb 8 2008
    - scheduler: do "careful update" of workunit.hr_class
        in case someone else changed since we read it.
        Hopefully this will fix a race condition
        where WU results get sent to different HR classes.
        (Alternatively we could use transactions,
        or acquire the semaphore during read/update,
        but this could impact performance).

    db/
        db_base.C,h
    sched/
        sched_hr.C

Rom    Feb 9 2008
    - client: only construct the path to ca-bundle.crt once.
    
    client/
        http_curl.C

David  Feb 9 2008
    - scheduler: fix bone-head mistake in HR code

    client/
        app_control.C
    sched/
        sched_hr.C

David  Feb 12 2008
    - client: removed sprawl

    client/
        app_start.C
        client_state.C,h
        file_names.h
        sandbox.C
    lib/
        util.C,h

David  Feb 12 2008
    - client: if a non-CPU-intensive project already has a job
        (even if suspended or downloading) don't ask for another one
        (from John McLeod)

    client/
        work_fetch.C

David  Feb 12 2008
    - client code: my next-to-last checkin was flawed

    client/
        app_start.C
        client_state.C,h
        sandbox.C
    clientgui/
        BOINCClientManager.cpp
        MainDocument.cpp
    lib/
        common_defs.h
        util.C,h

David  Feb 12 2008
    lib/
        str_util.h

David  Feb 13 2008
    - web: remove all references to the PHP "session" mechanism,
        which added only confusion.
        Implement login directly, using cookies.
    - All cookie setting/clearing now goes through two functions,
        send_cookie() and clear_cookie().
        These deal with path and expiry
        (e.g. if you want to have different language or forum settings
        on two projects on the same server, that now works).

    html/
        inc/
            util.inc
        ops/
            login_action.php
        user/
            account_finish_action.php
            apps.php
            create_account_action.php
            create_account_form.php
            forum_forum.php
            forum_thread.php
            home.php
            language_select.php
            login_action.php
            logout.php
            team.php
            team_lookup.php

David  Feb 13 2008
    - web: make "next URL" mechanism work when user creates new account
        instead of logging in

    html/
        inc/
            util.inc
        user/
            create_account_action.php
            create_account_form.php
            login_form.php

Charlie Feb 14 2008
    - MAC SCR: Use Quartz drawing instead of deprecated QuickDraw APIs.
        Show moving logo with text underneath like Windows screensaver 
        instead of horizontally scrolling banner text.
        
    clientscr/
        mac_saver_module.cpp
        Mac_Saver_Module.h
        Mac_Saver_ModuleView.m,h
        screensaver.cpp
        res/
            boinc_ss_logo.png (new)
            gridrepublic_ss_logo.png (new)
    mac_build/
        boinc.xcodeproj/
            project.pbxproj

David  Feb 15 2008
    - rename cgi.log to scheduler.log
    - fix ops login

    sched/
        main.C
    html/
        login_action.php

Rom    Feb 15 2008
    - client: prevent information disclosure by creating a new environment
        block for applications launched using the 'boinc_project' account.
        
        Windows contains environment variables that describe username,
        domain name, profile directory and even logon server.
        
    - client: correctly parse domain name information from the
        client_auth.xml file when a different account is used for
        'boinc_master'.
    - SCR/MGR: Add two API's to adjust the ACLs on the current users
        desktop and windowstation so that graphics applications can
        properly create controls and dialogs for applications
        launched using 'boinc_project'.
        
    client/
        app_start.C
    lib/
        boinc_win.h
        util.C, .h
    lib/
        win_util.C, .h
    win_build/
        boinc_cli_curl.vcproj
 
 
David  Feb 17 2008
    - web: single quotes in team name HTML didn't work
        because of magic quotes (need stripslashes()).

    html/user/
        team_edit_action.php

David  Feb 17 2008
    - scheduler: fix earlier fix to HR race condition.
        I was doing "careful update" but not checking
        that the # of affected rows is 1
        
    sched/
        sched_hr.C

David  Feb 18 2008
    - web: fix in XML RPC to get pending credit

    html/user/
        pending.php

Charlie Feb 19 2008
    - MAC SCR: Further changes and cleanup of new Mac screensaver; when 
        applications don't support graphics, cycle progress text through 
        tasks like Windows screensaver. Fix crash bug when activity is 
        suspended from a remote host.
    - WIN SCR: Fix bug in Windows code which cycles progress text.
        
    clientscr/
        mac_saver_module.cpp
        Mac_Saver_Module.h
        Mac_Saver_ModuleView.m,h
         screensaver.cpp
        screensaver_win.cpp

Charlie Feb 20 2008
    - Mac client: Fix bug which erroneously set powerpc_emulated_on_i386 
        true for X86_64 native applications.  
        
    client/
        app_graphics.C

David  Feb 20 2008
    - Server: add "job assignment" feature.
        Lets you assign a WU to a particular host,
        to one or all hosts belonging to a user or team, or to all hosts.
        See http://boinc.berkeley.edu/trac/wiki/AssignedWork
        Disabled unless you include <enable_assignment> in config.xml
        Uses a new DB table.
        Tested but only a little.
    - Server: code cleanup; moved result-handling to a new file,
        and removed the PLATFORM_LIST arg to everything
        (put it in SCHEDULER_REQUEST instead)

    api/
        boinc_api.C
    db/
        boinc_db.C,h
        schema.sql
    html/
        inc/
            db_ops.inc
        ops/
            assign.php (new)
            db_update.php
    sched/
        Makefile.am
        feeder.C
        file_upload_handler.C
        handle_request.C
        sched_assign.C,h (new)
        sched_result.C,h (new)
        sched_*
        transitioner.C
    tools/
        Makefile.am
        backend_lib.C,h
        create_work.C

Charlie Feb 20 2008
    - V6 GFX API: exit if parent application is no longer running. When running 
        under a V5 client, the worker app launches the graphics app so this code 
        kills the graphics when the worker application exits.
        Under a V6 client, the Manager or Screensaver launched the graphics app
        so this code kills the graphics when the Manager or Screensaver exits.
    - V6 GFX API: If running under V5 client, notify the client if the graphics 
        app exits (e.g., if user clicked in the graphics window's close box.)
    - Mac V6 GFX: Under sandbox, use switcher to kill graphics app when worker 
        app has exited.

    api/
        boinc_api.C
        graphics2_unix.C
    clientgui/
        MainDocument.cpp

David  Feb 21 2008
    - web: fix message

    html/user/
        user_search.php

Rom    Feb 21 2008
    - Update release libcurl to include the c-ares library on Windows
    
    curl/
        <Various Files>

David  Feb 21 2008
    - scheduler: add <max_ncpus> config option.
        Use this with N=1 if your application primarily uses a coprocessor

    sched/
        sched_config.C,h
        sched_send.C

David  Feb 21 2008
    - scheduler: code cleanup, remove "SCHED_MSG_LOG::" from a zillion places

    sched/*.C

Charlie Feb 21 2008
    - Mac SCR: Horizontaly center the text under the logo in screensaver.
    - Mac: Update GridRepublic branding scripts for new screensaver and to 
        fix bugs when building under OS 10.5 and/or using PackageMaker V3
        (XCode Tools V3).

    clientscr/
        Mac_Saver_ModuleView.m
    mac_installer/
        make_GridRepublic.sh
        release_GridRepublic.sh

Charlie Feb 22 2008
    - Mac SCR: Faster screensaver frame rate, slower maximum logo slew rate 
        (when not displaying application graphics) for smoother motion.

    clientscr/
        mac_saver_module.cpp
        Mac_Saver_ModuleView.m

David  Feb 22 2008
    - scheduler: code cleanup: use global var for SCHED_SHMEM
        instead of passing it around as argument
        (should do same for request and reply at some point)

    sched/sched_*

David  Feb 23 2008
    - client: fix crashing bug in SCHEDULER_OP::backoff().
        Was using cur_proj (which is potentially NULL) instead of p

    client/
        scheduler_op.C

David  Feb 25 2008
    - scheduler: add a general method for excluding hosts from job distribution.
        config.xml has optional <ban_os> and <ban_cpu> elements,
        which contain regular expressions matched against
        os_name\tos_version and p_vendor\tp_model.
        If a host matches either one, it's not sent jobs.
    - scheduler: fix bug in job assignment
    - scheduler: initial (incompleted, commented-out) code for
        matchmaker scheduling
    - server programs: declare "SCHED_CONFIG config" in sched_config.C;
        remove declarations of it from all other .C files
        (because I added a vector to it, I can no longer use memset
        to initialize it to zero; instead, it must be a global variable,
        not an automatic)

    sched/*.C

Rom    Feb 25 2008
    - Update release libcurl to include the c-ares library on Windows
        (debug)
    
    curl/
        <Various Files>

David  Feb 25 2008
    - Manager: compile fix for linux

    clientgui/
        MainDocument.cpp

Rom    Feb 25 2008
    - MGR: Fix the crash on linux when BOINC Manager is shut down.
        (Patch from Michael Roberts)
        
    clientgui/
        AdvancedFrame.cpp

Charlie Feb 25 2008
    - MGR: When connecting to a different host, delete all old messages in 
        message pane (from previously connected client) before getting new 
        messages.
        
    clientgui/
        sg_DlgMessages.cpp
        ViewMessages.cpp

Charlie Feb 25 2008
    - Mac SCR: Display "Starting screensaver graphics. Please wait ..." 
        for 45 seconds each time we start graphics from a different application.
        The application graphics window will hide this when it opens, so we 
        stop showing it after 45 seconds to avoid wasting CPU cycles. 
        
    clientscr/
        mac_saver_module.cpp
        Mac_Saver_Module.h
        screensaver.cpp

David  Feb 26 2008
    - server: make the special substring for assigned WUs
        into a #define's symbol (ASSIGNED_WU_STR)
    - scheduler: when send client command to abort a WU,
        include a reason code in the scheduler log

    lib/
        common_defs.h
    sched/
        handle_request.C
        sched_send.C
        server_types.h
        transitioner.C
    tools/
        backend_lib.C
        create_work.C

Charlie Feb 26 2008
    - Mac sandbox: set ownership and permissions for gfx_switcher in screensaver 
        if it exists.
        
    mac_build/
        Mac_SA_Secure.sh

Charlie Feb 26 2008
    - Mac SCR: Add a test to directly determine when a graphics application
        window obscures our moving logo animation;
        if so, stop showing moving logo to avoid wasting CPU cycles. 

    clientscr/
        mac_saver_module.cpp
        Mac_Saver_Module.h
        Mac_Saver_ModuleView.m,h
    mac_build/
        boinc.xcodeproj/
            project.pbxproj

Charlie Feb 27 2008
    Mac: In build scripts: fix bug, add checks for needed SDKs; update build 
        documentation (from Bernd Machenschalk.)

    mac_build/
        HowToBuildBOINC_XCode.rtf
        buildc-ares.sh
        buildcurl.sh
        buildjpeg.sh
        buildWxMac.sh
        setupForBOINC.sh

David  Feb 27 2008
    - Scheduler: fix bugs in work assignment feature

    html/ops/
        assign.php
    sched/
        handle_request.C
        main.C
        sched_assign.C
        sched_msgs.C,h
        sched_send.C
    tools/
        create_work.C

David  Feb 27 2008
    - changes to many files to fix gcc4.3 compile

Rom    Feb 27 2008
    - MGR/SCR: run_program should explicitly set the desktop
        and window station to whichever desktop and window station
        the app launching it belongs. If access is denied then
        change the ACLs on the current desktop and window station
        then attempt to relaunch the application.
        
    lib/
        util.C

Charlie Feb 28 2008
    - MGR: When connected host has changed, clear all cached messages and 
        resume auto-scrolling messages.
        
    clientgui/
        MainDocument.cpp
        ViewMessages.cpp

Rytis   Feb 28 2008
    - User web: fix (at least part of) long threads issue.
    
    html/inc/
        forum.inc

Charlie Feb 28 2008
    - MGR: When connected connecting to a different host, clear all cached 
        messages (a more efficient implementation).
        
    clientgui/
        MainDocument.cpp
 
Rom    Feb 28 2008
    - CLI: CreateEnvironmentBlock always creates a Unicode Environment block.
    - MGR: CreateProcessAsUser doesn't always error out when the ACLs haven't
        been changed for a specific Desktop and WindowStation so go ahead
        and Modify the ACLs with every call. It appears the ACLs revert
        themselves after CreateProcessAsUser is called anyway.
        
    client/
        app_start.C
    lib/
        util.C

Rom    Feb 28 2008 (HEAD)
    - Tag for 6.1.9 release, all platforms
      boinc_core_release_6_1_9

    /
        configure.ac
        version.h

David  Feb 28 2008
    - make_project: initialize send_result_abort=1 in config file
    - web: "least recent" => "oldest", "most recent" => "newest"
    - scheduler: change DELAY_NO_WORK_CACHE from 20 min to 0.
        Otherwise, a host that has max_wus_in_progress,
        completes one, and sends a work request before the upload is finished
        will delay (and maybe sit idle) for 20 min.
        Better to have a few extra scheduler requests
        and let the client's backoff take care of things.

    html/inc/
        forum.inc
    py/Boinc/
        setup_project.py
    sched/
        main.h
        sched_send.C
        server_types.C

Rom    Feb 29 2008
    - lib: remove references to LogonUserEx which does not exist on Win2k or
        older machines.
    - lib: comment out the CreateProcessAsUser code for graphics apps.
        (this is temporary)
        
    lib/
        util.C
        win_util.C, .h


Rom    Feb 29 2008
    - Change libcurl to use sync DNS on Windows (Release version only)
    
    curl/
        <Various Files>

Rytis  Mar 2 2008
    - make_project: copy javascript files to html/user.
    
    py/Boinc/
        setup_project.py

David  Mar 3 2008
    - transitioner: we're not supposed to ever see "assigned" WUs.
        But if we do, set their transitioner time to plus infinity
        so that we don't see them again.
        (otherwise we go into an infinite loop)
    - DB code: remove "high_priority" from queries not from scheduler
        (should probably remove them from there too)
    - file_deleter: print error msg if apache user doesn't exist

    db/
        boinc_db.C
    sched/
        feeder.C
        file_deleter.C
        transitioner.C
    tools/
        create_work.C

Charlie Mar 4 2008
    - MGR: Disallow multiple selections in grid views.

    clientgui/
        ViewProjectsGrid.cpp,h
        ViewTransfersGrid.cpp,h
        ViewWorkGrid.cpp,h

David  Mar 4 2008
    - web: fixed typo that cause bad (and slow) query
        when notifying user of friend acceptance on web

    html/inc
        friend.inc

David  Mar 4 2008
    - server: added a mechanism for submitting jobs as:
        > boinc_submit --infile foo --outfile blah program --args
        This will run "program" on a remote host,
        with the given input, output files, and command-line args

        It manages everything for you.
        You don't have to worry about apps, app_versions,
        template files, wrapper job files, etc.
        See: http://boinc.berkeley.edu/trac/wiki/SingleJob

        Initial checkin - not debugged yet.

    html/
        inc/
            boinc_db.inc
        ops/
            single_job_setup (new)
    sched/
        Makefile.am
        feeder.C
        single_job_assimilator.C (new)
    tools/
        backend_lib.C
        boinc_submit (new)
        create_work.C

Charlie Mar 4 2008
    - MGR: Allow multiple selections in Transfers grid view only 
        (requested by Jorden van der Elst).  The Transfers tab is 
        the only grid view where the buttons did work properly with 
        multiple selections, so there is no reason to disable it.
        The other tabs disabled all buttons when multiple items were 
        selected, so allowing multiple selections was confusing to 
        users.
    - MGR: When order of rows in grid views changes (due to sorting or 
        changes in data), reselect the same data in the rearranged rows
        using:
            Projects tab: project name only
            Tasks tab: project name and work unit (task) name
            Transfers tab: project name and file name
            Messages tab: sequence number only.
    - MGR: set m_bForceUpdateSelection=true when deleting rows from grid 
        views.  Fixes bug: if the last row was selected and is deleted, 
        the new last row is automatically selected but the buttons were 
        not updated to reflect the new selection.

    clientgui/
        BOINCGridCtrl.cpp,h
        ViewMessagesGrid.cpp
        ViewProjectsGrid.cpp
        ViewTransfersGrid.cpp
        ViewWorkGrid.cpp

Charlie Mar 5 2008
    - MGR: Add hidden project URL column to Tasks, Projects and Tansfers 
        Grid Views; use the project URL instead of the project name to 
        identify items.  The criteria for identifying an entry and its 
        underlying data are now:
            Projects tab: project URL only
            Tasks tab: project URL and work unit (task) name
            Transfers tab: project URL and file name
            Messages tab: sequence number only.

    clientgui/
        BOINCGridtrl.cpp
        MainDocument.cpp,h
        ViewMessagesGrid.cpp
        ViewProjectsGrid.cpp,h
        ViewTransfersGrid.cpp,h
        ViewWorkGrid.cpp,h

David  Mar 5 2008
    - server: debugged single-job submission feature.
        It works, at least in my test case.
    - boinc_submit script:
        show status every 10 seconds until completed
        add --wait option to show status for previous submission
    - Added get_logical_name() in validate_util.C
    - create_work: change default target_nresults from 5 to 2,
        max_error_results from 10 to 3,
        max_total_results from 20 to 10,
        max_success_results from 10 to 6
    - boinc_cmd: show full usage if no args
    - project setup: copy single_job_assimilator

    html/
        inc/
            boinc_db.inc
        ops/
            single_job_setup
    lib/
        boinc_cmd.C
        error_numbers.h
    py/Boinc/
        setup_project.py
    sched/
        single_job_assimilator.C
        validate_util.C,h
    tools/
        boinc_submit
        create_work.C

Eric K  5 Mar 08
    - Matched function linkage in api/graphics2.h to those in 
      api/graphics_api.h

    api/
      graphics2.h

David  5 Mar 2008
    - web: minor code cleanup

    html/
        inc/
            util.inc
        user/
            hosts_user.php
            white.css

Charlie Mar 6 2008
    - MGR: Fully implement support for multiple selections in Tasks 
        and Projects grid views.  Handles conflicts as follows:
          - Disables buttons which change functions (Suspend / Resume, 
            No New Tasks / Allow New Tasks) if user selects a mix of 
            items inconsistent with either function.  
          - Disables any buttons (Show Graphics, Abort) which would be 
            disabled for any one of the selected items.
          - Disables and hides project web site buttons if items from 
            more than one project are selected.
          - For operations which require confirmation (Abort, Reset,
            Detach) asks in a separate dialog for each selected item. 
            User can answer NO to some and YES to others and it will 
            perform the operation only on those with a YES response.
        - Added two defines: PREVENT_MULTIPLE_TASK_SELECTIONS and 
            PREVENT_MULTIPLE_PROJECT_SELECTIONS in the corresponding 
            header files.  Both are currently defined false.  Define 
            these as true to restrict that tab to single-selections.
    
    clientgui/
        ViewProjectsGrid.cpp,h
        ViewWorkGrid.cpp,h

Rom    6 Mar 2008
    - CLI: Make the CreateProcessAsUser process work again on Windows.
        It broke after the change of removing the call to LogonUserEx.

    client/
        app_start.C
    lib/
        util.C

Rom    6 Mar 2008
    - MGR: Fix build breaks on Windows
    
    clientgui/
        ViewProjectsGrid.h
        ViewWorkGrid.cpp, .h
    win_build/
        boincmgr_curl.vcproj

Rytis   6 Mar 2008
    - User web: translate some strings in forum.inc (fix #496).
    
    html/
        inc/
            forum.inc
        languages/
            en.po

David  6 Mar 2008
    - lib: add Win function to suspend or resume all threads in a process

    lib
        win_util.C,h

Rom    6 Mar 2008
    - lib: Remove SEH exception handling from MS sample code.
    
    lib/
        win_util.C

David  6 Mar 2008
    - admin web: fix profile screen form formatting
    - web: remove get_transform_settings_from_user().
        There's only get_output_options()

        NOTE: why is text_transform() doing stripslashes()?
        The slashes shouldn't be in the DB in the first place.
        There's some fundamental confusion here.

    - web: fix uotd.php

    html/
        inc/
            forum.inc
            profile.inc
            text_transform.inc
        ops/
            profile_screen_form.php
        user/
            uotd.php

David  6 Mar 2008
    - web: error-check the destination thread for moderation moves

    html/user/
        forum_moderate_post_action.php

David  7 Mar 2008
    - removed boinc_ncpus_available() and boinc_nthreads() calls.
        The design has been changed to constant #threads per app version

    api/
        boinc_api.C,h
    client/
        app_control.C
    html/inc/
        stats_sites.inc

David  7 Mar 2008
    Various changes from Kevin Reed/WCG:
    - server: add workunit.rsc_bandwidth_bound: if nonzero,
        send this WU only to hosts with that much download bandwidth
    - assimilators: if a handler returns DEFER_ASSIMILATION,
        the WU remains in INIT state and will be handled when the
        next instance completes.
        Useful if you want the assimilator to see all instances.
    - scheduler: when setting result.outcome = DETACHED,
        set received_time to now
    - scheduler: removed the reliable_time and reliable_min_avg_credit
        options
    - scheduler/web: add optional <allow_non_preferred_projects>
        in project preferences.
        If present, user will accept work from non-selected apps
        if no work is available for selected apps
    - scheduler: improved messages for projects with multiple apps
    - scheduler: added config options
        <granted_credit_weight> and <granted_credit_ramp_up>.
        Used in calculating host.claimed_credit_per_cpu_sec,
        but I'm not sure how.
    - Added two new credit-granting formulas (validate_util.C):
        stddev_credit() and two_credit()
    - server DB: add rollback_transaction() and affected_rows() to DB_CONN

    NOTE: DB update required

    db/
        boinc_db.C,h
        db_base.C,h
        schema.sql
    html/ops/
        db_update.php
    lib/
        str_util.h
    sched/
        assimilate_handler.h
        assimilator.C
        feeder.C
        handle_request.C
        sched_assign.C
        sched_config.C,h
        sched_send.C,h
        server_types.C,h
        transitioner.C
        validate_util.C,h
        backend_lib.C
        create_work.C

Charlie Mar 7 2008
    - MGR: restore intended sense of #defines and #if which were incorrectly 
        changed to fix Windows build breaks.
        
    clientgui/
        ViewProjectsGrid.h
        ViewWorkGrid.h

David  Mar 9 2008
    - Manager: avoid asserts on Linux
    - Lib: compile fixes for MinGW

    clientgui/
        AdvancedFrame.cpp
    lib/
        util.C

David  Mar 10 2008
    - server: fix botched checkin from 7 March.
        The new field (workunit.rsc_bandwidth_bound)
        goes at the END of the record.
        Always do it this way!
    - make_work: after creating a batch of new WUs,
        we were waiting 60 sec for the transitioner to
        create the results for them
        (so that our next count of unsent results would be correct).
        This is bogus; if e.g. the transitioner isn't running,
        we'll never get the results, and we'll keep creating WUs forever.

        Instead: explicitly wait for there to be results for
        the last WU from the batch just created.

    - scheduler: parse <allow_non_preferred_apps>, <allow_beta_work> correctly.

    db/
        schema.sql
    html/ops/
        db_update.php
    sched/
        make_work.C
        send.C

David  Mar 10 2008
    - client: preliminary support for detecting and reporting coprocessors
        (for now, CUDA devices)

    client/
        client_state.C,h
        cs_scheduler.C
        procinfo_unix.C (deleted)
    lib/
        Makefile.am
        coproc.C,h (new)

David  Mar 10 2008
    - lib: moved "run program as user" stuff to a separate file,
        so it doesn't screw up the linkage of apps that don't use it
    - start of server-side support for coprocessors

    client/
        auto_update.C
        main.C
    clientgui/
        BOINCClientManager.cpp
        MainDocument.cpp
    lib/
        Makefile.am
        coproc.C,h
        proc_control.C,h (new)
        util.C,h
    sched/
        server_types.C,h

David  Mar 10 2008
    - Second pass at the above.  We still need run_program() in util.C.
        The problem was that there's a lot of extra stuff needed
        for running apps on Windows (e.g. related to sandboxing).
        This needed to be a new function.

    clientgui/
        MainDocument.cpp
    clientscr/
        screensaver.cpp
    lib/
        Makefile.am
        proc_control.C,h
        util.C,h

David  Mar 10 2008
    - Added API makefile for MinGW (from Pasquale Tricarico)

    api/
        Makefile.mingw
    lib/
        proc_control.h

Charlie Mar 10 2008
    - Client: Rework write_state_file logic to always retry if there is an 
        error writing or renaming the state file, and to show warning messages 
        Can't rename / Can't write state file only if it failed all retries or 
        if the state_debug log flag is set.  These messages have appeared from 
        time to time and worry users, but they never seemed to signal any real 
        problems, probably because the subsequent retry succeeded.       
    - Client: Fix build breaks and compiler warnings on Mac.
    - Client: Add new source files to XCode project.
    
    client/
        app_start.C
        client_state.C
        cs_statefile.C
    clientgui/
        MainDocument.cpp
        ViewProjectsGrid.cpp
        ViewWorkGrid.cpp
    lib/
        coproc.C
        util.C
    mac_build/
        boinc.xcodeproj/
            project.pbxproj

David  Mar 11 2008
    - web: show venues in private host list
    - compile fixes

    client/
        cs_statefile.C
    clientgui/
        MainDocument.cpp
    html/
        inc/
            host.inc
        user/
            show_host_detail.php
            hosts_user.php

Charlie Mar 11 2008
    - Client: Retry entire write_state_file routine from the beginning if there is 
        an error writing or renaming the state file, not just the step that failed.

    client/
        cs_statefile.C

Charlie Mar 11 2008 (HEAD)
    - Tag for 6.1.10 release, all platforms
      boinc_core_release_6_1_10

    /
        configure.ac
        version.h

Rom    Mar 11 2008
    - CLI: Adjust the shared memory ACLs so that everybody can read/write to
        them, the default ACL limits read/write access to SYSTEM and boinc_master
        when run in secure mode.
        
    lib/
        boinc_win.h
        shmem.C

Rom    Mar 13 2008
    - API: Include 'Global\' in the shared memory segment name for worker and
        graphics applications so that the memory can be shared across terminal
        server sessions.
    - API: Add some trace messages to window creation and shutdown events, it
        is all logged to stderr.
    - API: Add some trace messages for loading graphic files.
    - API: Add some trace messages for loading font files.
    - API: There can be only one hInstance and it is assigned to the app at
        startup via winmain(). Use it throughout the graphics2 impl.
    - CC: Use the service security token to startup worker applications.
    - MGR: Use the interactive security token to startup graphics
        applications.
    - LIB: Create two different logon methods, one for logging on interactively
        (graphics applications) and one for services (worker application).

    api/
        graphics2_util.C
        graphics2_win.C
        gutil.C
        txf_util.C
    client/
        app_start.C
    lib/
        proc_control.C, .h
    win_build/
        boincmgr_curl.vcproj

David  Mar 13 2008
    Various preparation for handling multithreaded apps
    and apps that use coprocessors.
    There now can be several app_versions for the same
    (app, platform, version_num) combination.
    This changes a number of things.

    - Added app_version.plan_class field to DB
    - update_versions now looks for a :plan-class in the
        file or directory name, and puts it in the app_version's DB record
    - Change uniqueness constraint to include plan_class
    - Feeder: the feeder was putting non-deprecated app_versions
        in shared mem, and leaving it to the scheduler to
        find the latest version for a given platform.
        This is dumb.
        Instead, for each app/platform pair the feeder now
        finds the highest version number of a non-deprecated app version,
        and enumerates all non-deprecated app_versions with that
        app/platform/version
    - Scheduler: add a BEST_APP_VERSION data structure that keeps track,
        for each app, what the best app_version is for this host.
        This saves the work of recomputing it for each job.

    db/
        boinc_db.C,h
        constraints.sql
        schema.sql
    html/ops/
        db_update.php
    py/Boinc/
        database.py
    sched/
        sched_array.C
        sched_assign.C
        sched_send.C,h
        sched_shmem.C,h
        server_types.h
    tools/
        update_versions

Charlie Mar 13 2008
    MGR: Hopefully fix a crash bug.
    
    clientgui/
        BOINCGridCtrl.cpp

David  Mar 13 2008
    - Validator framework: remove some consts, and other changes,
        to allow validator to assign different credit
        to different instances of a job
    - Scheduler: if can't open DB, return <project_is_down/>
        (fixes #578)
    - clean up logic of modify_claimed_credit
    - feeder: for -priority_order_create_time, use workunitid
        rather than create time (faster for the DB)
    from Kevin Reed

    sched/
        feeder.C
        handle_request.C
        sample_bitwise_validator.C
        sample_trivial_validator.C
        sched_send.C
        server_types.C,h
        transitioner.C
        validate_util2.C,h
        validator.C

Charlie Mar 13 2008
    MGR: Fix flicker in projects tab website buttons.
    API: fix a compiler warning which was an actual logic error.
    
    clientgui/
        ViewProjectsGrid.cpp
    api/
        texfont.C

Rom    Mar 13 2008
    - API: Attempt to use the 'Global' tag first, if the API
        returns an ERROR_ACCESS_DENIED error code fallback
        to the original shmem_name.
        
    api/
        graphics2_util.C
    lib/
        shmem.C

David  Mar 14 2008
    - Add "opaque" field to APP_INIT_DATA (for passing #threads, etc.)

    lib/
        app_ipc.C,h

David  Mar 14 2008
    - web: fixed bugs in Bulgarian translation file

    html/inc/
        translation.inc
    languages/translations/
        bg.po

Rom    Mar 14 2008
    - SS: Launch the graphics app as the user instead of 'boinc_project'.
    - MGR: Launch the graphics app as the user instead of 'boinc_project'.
    
    clientgui/
        MainDocument.cpp
    clientscr/
        screensaver.cpp

Reinhard Mar 15 2008
     - fixed internal library dependencies in Makefile.am's

     Makefile.incl
     clientgui/
        Makefile.am
     tools/
        Makefile.am
     apps/
        Makefile.am
     client/
        Makefile.am
     sched/
        Makefile.am
     api/
        Makefile.am

David  Mar 16 2008
    - compile fix

    clientgui/
        ViewWorkGrid.cpp

Charlie Mar 17 2008
    - compile fix

    clientscr/
        screensaver.cpp

Rom    Mar 18 2008
    - MGR: Fix a crash in the simple GUI.
        NOTE: Do not use the at() function on a vector unless you
        also use a try/catch handler.
    - MGR: Remove code duplication 
      
    clientgui/
        sg_ClientStateIndicator.h
        sg_ProgressBar.cpp, .h
        sg_ViewTabPage.cpp

Rom    Mar 18 2008
    - MGR: For Grid enabled views, ignore selection events when
        saving and restoring selections.
    - MGR: Cleanup warnings in Grid views.
    
    clientgui/
        BOINCBaseView.cpp, .h
        BOINCGridCtrl.cpp
        ViewMessagesGrid.cpp
        ViewProjectsGrid.cpp
        ViewTransfersGrid.cpp
        ViewWorkGrid.cpp

David  Mar 18 2008
    - admin web: touch reread_db in manage_app_versions.php
    - DB code: remove "is_high_priority" stuff.
    - scheduler: merge find_app_version() into get_app_version().
        Have the latter memoize its results (both positive and negative).
        Have it call app_plan() for apps with nonempty plan_class.
    - scheduler: first steps towards improved selectability of log messages.
        It will eventually be like the client,
        where you can select among various types of messages.
    - feeder: if can't unlink the reread_db trigger file, exit
        (else we'd go into an infinite loop)
        
    db/
        db_base.C,h
    html/ops/
        manage_app_versions.php
    sched/
        Makefile.am
        feeder.C
        sched_*.C

Charlie Mar 19 2008
    - Client: Update coprocessor CUDA library code for Mac (not yet tested.)
    - Fix Mac crash backtrace code to work with OS 10.5. Use the new 
        officially supported APIs backtrace() and backtrace_symbols_fd() 
        under OS 10.5 or later, continue to use older code on earlier 
        systems without these APIs.
    - Mac: Change back to saving unstripped Client and Manager executables for 
        symbol tables rather than separate .dSYM files, which cannot be loaded 
        by atos command-line utility.  This also lets user substitute the 
        unstripped executable into application bundle to get backtraces with 
        symbols when debugging a crash in the field.  Set visibility of all 
        variables in Client and Manager to not be hidden so they appear in 
        crash dumps.
    
    lib/
        coproc.C
        mac/
            mac_backtrace.C
    mac_build/
        boinc.xcodeproj/
            project.pbxproj
        buildWxMac.sh
    mac_installer/
        release_boinc.sh
        release_GridRepublic.sh

David  Mar 19 2008
    - client (Unix): use symbolic links instead of XML link files.
        This will allow applications to access shared libraries
        by their logical names,
        which simplifies things when you have multiple platforms,
        and the apps (or libraries) refer to shared libraries
        by names that don't include the platform.
        This shouldn't impact the API - boinc_resolve_filename()
        will open the file, see that it's not an XML link file,
        and the symbolic link will be used directly.
        At some point we can change boinc_resolve_filename() on Unix
        to be a no-op if the client is 6.2+
    - client (Unix):
        Append the slot dir to LD_LIBRARY_PATH.
    - update_versions: added a feature where you can put a file
        "extra_xml" in the app dir, and it will get included in
        the app versions's xml_doc.
        Turns out I don't need this right now, but may as well leave it in.

    client/
        app_start.C
        client_types.C,h
    lib/
        boinc_cmd.C
        error_numbers.h
    py/Boinc/
        tools.py
    tools/
        update_versions

David  Mar 19 2008
    - client: fixes to the above.  Need to use lstat() instead of stat()
        so that we see the symlink, not what it's pointing to

    client/
        app_start.C
    lib/
        filesys.C

David  Mar 19 2008
    - forgot to add new files
    - scheduler: wreq.core_client_version was being computed in
        resend_lost_results() (which isn't necessarily called)
        but its value was used elsewhere.

    sched/
        sched_plan.C,h (new)
        sched_resend.C
        sched_send.C

Charlie Mar 20 2008
    - Client: fix  a compiler warning which indicated a real logic error (variable
        used uninitialized).
    - Mac: More work on backtrace code: run atos utility via a bidirectional pipe 
        instead of backtrace_symbols_fd() API to get better symbols in backtrace.  
        Set visibility of all variables in Client and Manager back to hidden (as 
        before) to reduce size of executables, since atos utility can use hidden 
        symbols.  This also involves return to previous wxWidgets build script.
       
    client/
        app_start.C
    lib/
        mac/
            mac_backtrace.C
    mac_build/
        boinc.xcodeproj/
            project.pbxproj
        buildWxMac.sh

David  Mar 20 2008
	- updated GeoIP stuff

	html/inc/
		GeoIP.dat
		geoip.inc

Charlie Mar 20 2008
    - Mac: Update sandbox security for symlinks replacing xml soft links.
    
    client/
        check_security.C
    clientgui/
        mac/
            SetupSecurity.cpp

Charlie Mar 21 2008
    - Mac: Another sandbox security update for symlinks: setprojectgrp calls 
        lchown() instead of chown().
    
    client/
        setprojectgrp.C

Charlie Mar 21 2008
    - Mac: More sandbox security changes for symlinks: lchown is not available 
        under OS 10.3.9, so don't use it.  The system ignores ownership and 
        permissions of symbolic links, so setprojectgrp does nothing if it is  
        called for a symbolic link.  
        Also make additional changes to check_security and SetupSecurity.
    
    client/
        check_security.C
        setprojectgrp.C
    clientgui/
        mac/
            SetupSecurity.cpp

Charlie Mar 27 2008
    - Mac: When invoked with the -lib argument, BOINC build script builds the 
        utility application MakeAppIcon_h in addition to the three libraries 
        libboinc_api.a, libboinc_graphics2.a and libboinc.a.

    mac_build/
        BuildMacBOINC.sh
